<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Debug Flutter Web Loading</title>
  <script>
    // Function to check if main.dart.js exists and is loadable
    async function checkFile(url) {
      try {
        const response = await fetch(url, { method: 'HEAD' });
        return {
          exists: response.ok,
          status: response.status,
          statusText: response.statusText
        };
      } catch (error) {
        return {
          exists: false,
          error: error.message
        };
      }
    }

    async function runTests() {
      const results = document.getElementById('results');
      
      // Test 1: Check if main.dart.js exists
      const mainDartCheck = await checkFile('main.dart.js');
      results.innerHTML += `<p>main.dart.js: ${JSON.stringify(mainDartCheck)}</p>`;
      
      // Test 2: Check if flutter.js exists
      const flutterJsCheck = await checkFile('flutter.js');
      results.innerHTML += `<p>flutter.js: ${JSON.stringify(flutterJsCheck)}</p>`;
      
      // Test 3: Check browser capabilities
      results.innerHTML += `<p>User Agent: ${navigator.userAgent}</p>`;
      
      // Test 4: Check for wasm support
      results.innerHTML += `<p>WebAssembly Support: ${"WebAssembly" in window}</p>`;
      
      // Test 5: Check for SharedArrayBuffer support (needed for some Flutter features)
      results.innerHTML += `<p>SharedArrayBuffer Support: ${"SharedArrayBuffer" in window}</p>`;
    }
  </script>
</head>
<body>
  <h1>Flutter Web Debug</h1>
  <p>This page runs diagnostics to help identify why the Flutter web app is stuck on loading.</p>
  <button onclick="runTests()">Run Diagnostics</button>
  <div id="results"></div>
</body>
</html> 